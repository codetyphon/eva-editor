(this["webpackJsonpflow-game"]=this["webpackJsonpflow-game"]||[]).push([[0],{288:function(e,t,n){},289:function(e,t,n){},450:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(10),i=n.n(o),s=(n(288),n(37)),r=n(16),l=(n(289),n(7));var d={Config:function(e){var t=e.data;return Object(l.jsxs)("div",{className:"node_base_components",style:{},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Config"}),t.label]}),Object(l.jsx)(r.b,{type:"source",position:r.c.Right})]})},Scene:function(e){var t=e.data;return Object(l.jsxs)("div",{className:"node_base_components",style:{},children:[Object(l.jsx)(r.b,{type:"target",position:r.c.Left}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Scene"}),t.label]}),Object(l.jsx)(r.b,{type:"source",position:r.c.Right})]})},Game:function(e){var t=e.data;return Object(l.jsxs)("div",{className:"node_base_components",style:{},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Game"}),t.label]}),Object(l.jsx)(r.b,{type:"target",position:r.c.Left})]})},GameObject:function(e){var t=e.data;return Object(l.jsxs)("div",{className:"node_base_components",style:{},children:[Object(l.jsx)(r.b,{type:"target",position:r.c.Left}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"GameObject"}),t.label]}),Object(l.jsx)(r.b,{type:"source",position:r.c.Right})]})},Graphics:function(e){var t=e.data;return Object(l.jsxs)("div",{className:"node_base_components",style:{},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h4",{children:"Graphics"}),t.label]}),Object(l.jsx)(r.b,{type:"source",position:r.c.Right})]})},Transform:function(e){var t=e.data;return Object(l.jsxs)("div",{className:"node_base_components",style:{},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h4",{children:"Transform"}),t.label]}),Object(l.jsx)(r.b,{type:"source",position:r.c.Right})]})},Image:function(e){var t=e.data;return Object(l.jsxs)("div",{className:"node_base_components",style:{},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h4",{children:"Image"}),t.label]}),Object(l.jsx)(r.b,{type:"source",position:r.c.Right})]})}},b=n(11),u=n(53),m=n(157),j=n(158),p=n(453),h=function(e){var t=e.confs,n=Object(a.useRef)(null),c=Object(a.useState)("0xde3249"),o=Object(s.a)(c,2),i=o[0],r=o[1],d=Object(a.useState)({x:100,y:100}),h=Object(s.a)(d,2),g=h[0],f=h[1],O=Object(a.useState)({width:100,height:100}),x=Object(s.a)(O,2),v=x[0],y=x[1],_=Object(a.useState)({name:Object(p.a)(),src:"/chrome-100.png"}),w=Object(s.a)(_,2),I=w[0],C=w[1];Object(a.useEffect)((function(){t.forEach((function(e){console.log(e);var t=e.id,n=(e.type,e.kv);if("background_component"===t){var a=n.color.replace("#","0x");r(a)}"Transform_for_player"===t&&(f({x:n.x,y:n.y}),y({width:n.width,height:n.height})),"image"===t&&(console.log("set src",n.src),C({name:Object(p.a)(),src:n.src}))}))}),[t]),b.i.addResource([{name:I.name,type:b.f.IMAGE,src:{image:{type:"png",url:I.src}},preload:!0}]);var N=new u.b({canvas:n.current,width:276,height:478,transparent:!1,resolution:window.devicePixelRatio/2,enableScroll:!0,renderType:0}),k=new b.b({frameRate:60,autoStart:!0,systems:[N,new m.b,new j.b]}),S=new b.c("bg",{position:{x:0,y:0},origin:{x:.5,y:.5}}),T=S.addComponent(new m.a);T.graphics.beginFill(i,1),T.graphics.drawRect(0,0,276,478,12),T.graphics.endFill(),k.scene.addChild(S);var G=new b.c("chrome",{size:v,origin:{x:.5,y:.5},position:g,scale:{x:.5,y:.5}});return G.addComponent(new j.a({resource:I.name})),k.scene.addChild(G),Object(l.jsxs)("div",{className:"preview",children:[Object(l.jsx)("img",{className:"iphone",src:"iphone.png",width:"300",alt:""}),Object(l.jsx)("canvas",{id:"canvas",ref:n,className:"previewCanvas"})]})},g=n(21),f=n(24),O=n(81),x=(n(394),n(395),n(396),n(240));var v=n(452),y=n(454),_=y.a.Group,w={Input:O.d,Color:function(e){var t=e.onChange,n=e.value,c=Object(a.useState)(n),o=Object(s.a)(c,2),i=o[0],r=o[1];return Object(l.jsx)("div",{style:{padding:10},children:Object(l.jsx)(x.Panel,{enableAlpha:!1,color:i,onChange:function(e){console.log(e.color),r(i),t(e.color)},mode:"RGB"})})},InputNumber:v.a,CheckboxGroup:_,Checkbox:y.a},I=function(e){var t=null;for(var n in w)n===e&&(t=w[n]);return t},C=function(e){var t=e.id,n=e.type,c=e.fields,o=e.update,i=Object(a.useMemo)((function(){return Object(g.a)()}),[c]);return Object(l.jsx)("div",{className:"PropertiesPanel",children:Object(l.jsxs)(f.b,{form:i,children:[Object(l.jsx)("h2",{children:n}),Object(l.jsx)(O.c,{layout:"vertical",children:c.map((function(e){return Object(l.jsx)("div",{children:Object(l.jsx)(f.a,{name:e.name,title:e.title,required:!0,initialValue:e.value,decorator:[O.b],component:[I(e.component)]})},e.key)}))}),Object(l.jsx)(O.a,{children:Object(l.jsx)(O.e,{hidden:c.length<1,onSubmit:function(e){o(t,n,e)},children:"\u5e94\u7528"})})]})})},N=[{id:"game",type:"Game",data:{label:"Game"},position:{x:600,y:300}},{id:"default_scene",type:"Scene",data:{label:"default"},position:{x:450,y:350}},{id:"config",type:"Config",data:{label:"Config",fields:[{name:"PhysicsSystem",title:"PhysicsSystem",component:"Checkbox",dataSource:[{label:"\u9009\u98791",value:1},{label:"\u9009\u98792",value:2}],value:"1"}]},position:{x:450,y:250}},{id:"background_gameobject",type:"GameObject",data:{label:"background",fields:[{name:"name",title:"name",component:"Input",value:"background"}]},position:{x:250,y:200}},{id:"player_gameobject",type:"GameObject",data:{label:"player",fields:[{name:"name",title:"name",component:"Input",value:"player"}]},position:{x:250,y:400}},{id:"background_component",type:"Graphics",data:{label:"background",fields:[{name:"name",title:"name",component:"Input",value:"background"},{name:"color",title:"color",component:"Color"}]},position:{x:50,y:100}},{id:"Transform_for_bg",type:"Transform",data:{label:"Transform",fields:[{name:"name",title:"name",value:"Transform",component:"Input"},{name:"x",title:"x",value:0,component:"InputNumber"},{name:"y",title:"y",value:0,component:"InputNumber"},{name:"width",title:"width",component:"InputNumber",value:276},{name:"height",title:"height",component:"InputNumber",value:478}]},position:{x:50,y:200}},{id:"Transform_for_player",type:"Transform",data:{label:"Transform",fields:[{name:"x",title:"x",value:100,component:"InputNumber"},{name:"y",title:"y",value:100,component:"InputNumber"},{name:"width",title:"width",component:"InputNumber",value:100},{name:"height",title:"height",component:"InputNumber",value:100}]},position:{x:50,y:450}},{id:"image",type:"Image",data:{label:"Image",fields:[{name:"name",title:"name",value:"image",component:"Input"},{name:"src",title:"src",value:"/chrome-100.png",component:"Input"}]},position:{x:50,y:350}},{id:"e1",source:"config",target:"game"},{id:"e2",source:"default_scene",target:"game"},{id:"e3",source:"background_gameobject",target:"default_scene"},{id:"e4",source:"background_component",target:"background_gameobject"},{id:"e5",source:"player_gameobject",target:"default_scene"},{id:"e6",source:"Transform_for_player",target:"player_gameobject"},{id:"e7",source:"image",target:"player_gameobject"},{id:"e8",source:"Transform_for_bg",target:"background_gameobject"}];var k=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(s.a)(o,2),b=i[0],u=i[1],m=Object(a.useState)(""),j=Object(s.a)(m,2),g=j[0],f=j[1],O=Object(a.useState)(""),x=Object(s.a)(O,2),v=x[0],y=x[1],_=Object(a.useState)([]),w=Object(s.a)(_,2),I=w[0],k=w[1];return Object(a.useEffect)((function(){u(N)}),[]),Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)(h,{confs:n}),Object(l.jsx)("div",{className:"canvas",children:Object(l.jsx)(r.e,{onElementClick:function(e,t){console.log(t);var n=t.id,a=t.type,c=t.data.fields||[];console.log(n,a,c),f(n),y(a),c.map((function(e){return e.key=Object(p.a)()})),k(c)},elements:b,nodeTypes:d,onConnect:function(e){u((function(t){return Object(r.d)(e,t)}))},onElementsRemove:function(e){u((function(t){return Object(r.f)(e,t)}))},deleteKeyCode:46,children:Object(l.jsx)(r.a,{})})}),Object(l.jsx)(C,{id:g,type:v,fields:I,update:function(e,t,n){console.log(e,t,n),c([{id:e,type:t,kv:n}])}})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,455)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(k,{})}),document.getElementById("root")),S()}},[[450,1,2]]]);
//# sourceMappingURL=main.c022ae82.chunk.js.map